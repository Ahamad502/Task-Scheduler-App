<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Scheduler App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .priority-high {
            border-left: 4px solid #ef4444;
        }
        .dark .priority-high {
            border-left: 4px solid #f87171;
        }
        .priority-medium {
            border-left: 4px solid #f59e0b;
        }
        .dark .priority-medium {
            border-left: 4px solid #fbbf24;
        }
        .priority-low {
            border-left: 4px solid #10b981;
        }
        .dark .priority-low {
            border-left: 4px solid #34d399;
        }
        .task-completed {
            opacity: 0.7;
            text-decoration: line-through;
        }
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- Header -->
        <header class="mb-8">
            <div class="flex justify-between items-center">
                <h1 class="text-3xl font-bold text-indigo-700 dark:text-indigo-300">
                    <i class="fas fa-tasks mr-2"></i> Task Scheduler
                </h1>
                <div class="flex items-center space-x-4">
                    <div id="currentDateTime" class="text-gray-600 dark:text-gray-300"></div>
                    <button id="themeToggle" class="p-2 rounded-full bg-gray-200 dark:bg-gray-700">
                        <i class="fas fa-moon"></i>
                    </button>
                </div>
            </div>
            <p class="text-gray-600 dark:text-gray-300 mt-2">Organize your tasks efficiently with reminders and priorities</p>
        </header>

        <!-- Main Content -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Task Form -->
            <div class="lg:col-span-1 bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 h-fit">
                <h2 class="text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200">
                    <i class="fas fa-plus-circle mr-2 text-indigo-600 dark:text-indigo-300"></i>Add New Task
                </h2>
                <form id="taskForm" class="space-y-4">
                    <div>
                        <label for="taskTitle" class="block text-sm font-medium text-gray-700 mb-1">Task Title</label>
                        <input type="text" id="taskTitle" required 
                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    </div>
                    
                    <div>
                        <label for="taskDescription" class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                        <textarea id="taskDescription" rows="3"
                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"></textarea>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label for="taskDueDate" class="block text-sm font-medium text-gray-700 mb-1">Due Date</label>
                            <input type="datetime-local" id="taskDueDate" 
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                        </div>
                        
                        <div>
                            <label for="taskPriority" class="block text-sm font-medium text-gray-700 mb-1">Priority</label>
                            <select id="taskPriority" 
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                                <option value="low">Low</option>
                                <option value="medium" selected>Medium</option>
                                <option value="high">High</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="flex items-center">
                        <input type="checkbox" id="taskReminder" class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded">
                        <label for="taskReminder" class="ml-2 block text-sm text-gray-700">Set Reminder</label>
                    </div>
                    
                    <div id="reminderOptions" class="hidden">
                        <label for="reminderTime" class="block text-sm font-medium text-gray-700 mb-1">Reminder Before</label>
                        <select id="reminderTime" 
                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                            <option value="5">5 minutes</option>
                            <option value="15">15 minutes</option>
                            <option value="30">30 minutes</option>
                            <option value="60">1 hour</option>
                            <option value="1440">1 day</option>
                        </select>
                    </div>
                    
                    <div class="flex justify-end space-x-3 pt-2">
                        <button type="reset" class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50">
                            Clear
                        </button>
                        <button type="submit" class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                            Add Task
                        </button>
                    </div>
                </form>
            </div>
            
            <!-- Task List -->
            <div class="lg:col-span-2">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-semibold text-gray-800 dark:text-gray-200">
                            <i class="fas fa-list-check mr-2 text-indigo-600 dark:text-indigo-300"></i>Your Tasks
                        </h2>
                        <div class="flex space-x-2">
                            <select id="sortBy" class="px-3 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm">
                                <option value="dueDate">Sort by Due Date</option>
                                <option value="priority">Sort by Priority</option>
                                <option value="createdAt">Sort by Creation Date</option>
                            </select>
                            <select id="filterBy" class="px-3 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm">
                                <option value="all">All Tasks</option>
                                <option value="today">Today</option>
                                <option value="upcoming">Upcoming</option>
                                <option value="completed">Completed</option>
                            </select>
                        </div>
                    </div>
                    
                    <div id="taskList" class="space-y-3">
                        <!-- Tasks will be dynamically added here -->
                        <div class="text-center py-8 text-gray-500" id="emptyState">
                            <i class="fas fa-inbox text-4xl mb-2"></i>
                            <p>No tasks found. Add a new task to get started!</p>
                        </div>
                    </div>
                </div>
                
                <!-- Stats -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6">
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 text-center">
                        <div class="text-2xl font-bold text-indigo-600 dark:text-indigo-300" id="totalTasks">0</div>
                        <div class="text-gray-600 dark:text-gray-300">Total Tasks</div>
                    </div>
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 text-center">
                        <div class="text-2xl font-bold text-green-600 dark:text-green-300" id="completedTasks">0</div>
                        <div class="text-gray-600 dark:text-gray-300">Completed</div>
                    </div>
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 text-center">
                        <div class="text-2xl font-bold text-red-600 dark:text-red-300" id="overdueTasks">0</div>
                        <div class="text-gray-600 dark:text-gray-300">Overdue</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Task Modal -->
    <div id="editModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white dark:bg-gray-900 rounded-lg shadow-xl p-6 w-full max-w-md border border-gray-200 dark:border-gray-700">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-200">Edit Task</h3>
                <button id="closeModal" class="text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="editTaskForm" class="space-y-4">
                <input type="hidden" id="editTaskId">
                <div>
                    <label for="editTaskTitle" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Task Title</label>
                    <input type="text" id="editTaskTitle" required 
                        class="w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                </div>
                
                <div>
                    <label for="editTaskDescription" class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                    <textarea id="editTaskDescription" rows="3"
                        class="w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500"></textarea>
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="editTaskDueDate" class="block text-sm font-medium text-gray-700 mb-1">Due Date</label>
                        <input type="datetime-local" id="editTaskDueDate" 
                            class="w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    </div>
                    
                    <div>
                        <label for="editTaskPriority" class="block text-sm font-medium text-gray-700 mb-1">Priority</label>
                        <select id="editTaskPriority" 
                            class="w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                            <option value="low">Low</option>
                            <option value="medium">Medium</option>
                            <option value="high">High</option>
                        </select>
                    </div>
                </div>
                
                <div class="flex items-center">
                    <input type="checkbox" id="editTaskReminder" class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded">
                    <label for="editTaskReminder" class="ml-2 block text-sm text-gray-700">Set Reminder</label>
                </div>
                
                <div id="editReminderOptions" class="hidden">
                    <label for="editReminderTime" class="block text-sm font-medium text-gray-700 mb-1">Reminder Before</label>
                    <select id="editReminderTime" 
                        class="w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                        <option value="5">5 minutes</option>
                        <option value="15">15 minutes</option>
                        <option value="30">30 minutes</option>
                        <option value="60">1 hour</option>
                        <option value="1440">1 day</option>
                    </select>
                </div>
                
                <div class="flex justify-end space-x-3 pt-2">
                    <button type="button" id="cancelEdit" class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50">
                        Cancel
                    </button>
                    <button type="submit" class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                        Save Changes
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="fixed bottom-4 right-4 bg-green-500 dark:bg-green-700 text-white px-4 py-2 rounded-md shadow-lg hidden">
        <span id="notificationMessage"></span>
    </div>

    <script>
        tailwind.config = {
            darkMode: 'class'
        }
    </script>
    <script>
        // Task data storage
        let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
        let reminders = JSON.parse(localStorage.getItem('reminders')) || [];
        
        // DOM Elements
        const taskForm = document.getElementById('taskForm');
        const editTaskForm = document.getElementById('editTaskForm');
        const taskList = document.getElementById('taskList');
        const emptyState = document.getElementById('emptyState');
        const totalTasksEl = document.getElementById('totalTasks');
        const completedTasksEl = document.getElementById('completedTasks');
        const overdueTasksEl = document.getElementById('overdueTasks');
        const currentDateTimeEl = document.getElementById('currentDateTime');
        const themeToggle = document.getElementById('themeToggle');
        const taskReminder = document.getElementById('taskReminder');
        const reminderOptions = document.getElementById('reminderOptions');
        const editTaskReminder = document.getElementById('editTaskReminder');
        const editReminderOptions = document.getElementById('editReminderOptions');
        const editModal = document.getElementById('editModal');
        const closeModal = document.getElementById('closeModal');
        const cancelEdit = document.getElementById('cancelEdit');
        const sortBy = document.getElementById('sortBy');
        const filterBy = document.getElementById('filterBy');
        const notification = document.getElementById('notification');
        const notificationMessage = document.getElementById('notificationMessage');

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            updateDateTime();
            setInterval(updateDateTime, 60000); // Update every minute
            renderTasks();
            checkReminders();
            setInterval(checkReminders, 60000); // Check reminders every minute
            
            // Load theme preference
            if (localStorage.getItem('theme') === 'dark') {
                document.documentElement.classList.add('dark');
                themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
            }
        });

        // Update current date and time
        function updateDateTime() {
            const now = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            };
            currentDateTimeEl.textContent = now.toLocaleDateString('en-US', options);
        }

        // Toggle dark/light theme
        themeToggle.addEventListener('click', function() {
            document.documentElement.classList.toggle('dark');
            if (document.documentElement.classList.contains('dark')) {
                localStorage.setItem('theme', 'dark');
                themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
            } else {
                localStorage.setItem('theme', 'light');
                themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
            }
        });

        // Show/hide reminder options
        taskReminder.addEventListener('change', function() {
            if (this.checked) {
                reminderOptions.classList.remove('hidden');
            } else {
                reminderOptions.classList.add('hidden');
            }
        });

        editTaskReminder.addEventListener('change', function() {
            if (this.checked) {
                editReminderOptions.classList.remove('hidden');
            } else {
                editReminderOptions.classList.add('hidden');
            }
        });

        // Add new task
        taskForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const title = document.getElementById('taskTitle').value;
            const description = document.getElementById('taskDescription').value;
            const dueDate = document.getElementById('taskDueDate').value;
            const priority = document.getElementById('taskPriority').value;
            const hasReminder = document.getElementById('taskReminder').checked;
            const reminderTime = hasReminder ? parseInt(document.getElementById('reminderTime').value) : null;
            
            const newTask = {
                id: Date.now().toString(),
                title,
                description,
                dueDate: dueDate || null,
                priority,
                completed: false,
                createdAt: new Date().toISOString(),
                reminder: hasReminder,
                reminderTime
            };
            
            tasks.push(newTask);
            saveTasks();
            renderTasks();
            taskForm.reset();
            reminderOptions.classList.add('hidden');
            
            showNotification('Task added successfully!');
        });

        // Edit task
        editTaskForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const id = document.getElementById('editTaskId').value;
            const title = document.getElementById('editTaskTitle').value;
            const description = document.getElementById('editTaskDescription').value;
            const dueDate = document.getElementById('editTaskDueDate').value;
            const priority = document.getElementById('editTaskPriority').value;
            const hasReminder = document.getElementById('editTaskReminder').checked;
            const reminderTime = hasReminder ? parseInt(document.getElementById('editReminderTime').value) : null;
            
            const taskIndex = tasks.findIndex(task => task.id === id);
            if (taskIndex !== -1) {
                tasks[taskIndex] = {
                    ...tasks[taskIndex],
                    title,
                    description,
                    dueDate: dueDate || null,
                    priority,
                    reminder: hasReminder,
                    reminderTime
                };
                
                saveTasks();
                renderTasks();
                closeEditModal();
                
                showNotification('Task updated successfully!');
            }
        });

        // Render tasks
        function renderTasks() {
            // Filter tasks
            let filteredTasks = [...tasks];
            const filterValue = filterBy.value;
            
            if (filterValue === 'today') {
                const today = new Date();
                today.setHours(0, 0, 0, 0);
                filteredTasks = filteredTasks.filter(task => {
                    if (!task.dueDate) return false;
                    const taskDate = new Date(task.dueDate);
                    taskDate.setHours(0, 0, 0, 0);
                    return taskDate.getTime() === today.getTime();
                });
            } else if (filterValue === 'upcoming') {
                const now = new Date();
                filteredTasks = filteredTasks.filter(task => {
                    if (!task.dueDate) return false;
                    return new Date(task.dueDate) > now;
                });
            } else if (filterValue === 'completed') {
                filteredTasks = filteredTasks.filter(task => task.completed);
            }
            
            // Sort tasks
            const sortValue = sortBy.value;
            filteredTasks.sort((a, b) => {
                if (sortValue === 'priority') {
                    const priorityOrder = { high: 3, medium: 2, low: 1 };
                    return priorityOrder[b.priority] - priorityOrder[a.priority];
                } else if (sortValue === 'createdAt') {
                    return new Date(b.createdAt) - new Date(a.createdAt);
                } else { // dueDate
                    if (!a.dueDate && !b.dueDate) return 0;
                    if (!a.dueDate) return 1;
                    if (!b.dueDate) return -1;
                    return new Date(a.dueDate) - new Date(b.dueDate);
                }
            });
            
            // Clear task list
            taskList.innerHTML = '';
            
            if (filteredTasks.length === 0) {
                emptyState.classList.remove('hidden');
                taskList.appendChild(emptyState);
            } else {
                emptyState.classList.add('hidden');
                filteredTasks.forEach(task => {
                    taskList.appendChild(createTaskElement(task));
                });
            }
            
            updateStats();
        }

        // Create task element
        function createTaskElement(task) {
            const now = new Date();
            const dueDate = task.dueDate ? new Date(task.dueDate) : null;
            const isOverdue = dueDate && dueDate < now && !task.completed;
            
            const taskEl = document.createElement('div');
            taskEl.className = `bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md p-4 ${task.completed ? 'task-completed' : ''} priority-${task.priority}`;
            if (isOverdue) {
                taskEl.classList.add('animate-pulse');
            }
            
            const priorityColors = {
                high: 'text-red-500',
                medium: 'text-yellow-500',
                low: 'text-green-500'
            };
            
            const priorityText = {
                high: 'High',
                medium: 'Medium',
                low: 'Low'
            };
            
            let dueDateText = 'No due date';
            if (dueDate) {
                const options = { 
                    year: 'numeric', 
                    month: 'short', 
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                };
                dueDateText = dueDate.toLocaleDateString('en-US', options);
            }
            
            taskEl.innerHTML = `
                <div class="flex justify-between items-start">
                    <div class="flex items-start space-x-3">
                        <button class="complete-btn mt-1" data-id="${task.id}">
                            <i class="far ${task.completed ? 'fa-check-circle text-green-500' : 'fa-circle'}"></i>
                        </button>
                        <div>
                            <h3 class="font-medium text-gray-800 ${task.completed ? 'line-through' : ''}">${task.title}</h3>
                            ${task.description ? `<p class="text-gray-600 text-sm mt-1">${task.description}</p>` : ''}
                            <div class="flex items-center space-x-4 mt-2 text-sm">
                                <span class="text-gray-500"><i class="far fa-calendar-alt mr-1"></i>${dueDateText}</span>
                                <span class="${priorityColors[task.priority]}"><i class="fas fa-exclamation-circle mr-1"></i>${priorityText[task.priority]}</span>
                                ${task.reminder ? '<span class="text-blue-500"><i class="fas fa-bell mr-1"></i>Reminder set</span>' : ''}
                                ${isOverdue ? '<span class="text-red-500"><i class="fas fa-exclamation-triangle mr-1"></i>Overdue</span>' : ''}
                            </div>
                        </div>
                    </div>
                    <div class="flex space-x-2">
                        <button class="edit-btn p-1 text-gray-500 hover:text-indigo-600" data-id="${task.id}">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="delete-btn p-1 text-gray-500 hover:text-red-600" data-id="${task.id}">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                    </div>
                </div>
            `;
            
            // Add event listeners to buttons
            taskEl.querySelector('.complete-btn').addEventListener('click', function() {
                toggleTaskComplete(this.getAttribute('data-id'));
            });
            
            taskEl.querySelector('.edit-btn').addEventListener('click', function() {
                openEditModal(this.getAttribute('data-id'));
            });
            
            taskEl.querySelector('.delete-btn').addEventListener('click', function() {
                deleteTask(this.getAttribute('data-id'));
            });
            
            return taskEl;
        }

        // Toggle task completion
        function toggleTaskComplete(id) {
            const taskIndex = tasks.findIndex(task => task.id === id);
            if (taskIndex !== -1) {
                tasks[taskIndex].completed = !tasks[taskIndex].completed;
                saveTasks();
                renderTasks();
                
                const message = tasks[taskIndex].completed ? 'Task marked as completed!' : 'Task marked as incomplete!';
                showNotification(message);
            }
        }

        // Open edit modal
        function openEditModal(id) {
            const task = tasks.find(task => task.id === id);
            if (task) {
                document.getElementById('editTaskId').value = task.id;
                document.getElementById('editTaskTitle').value = task.title;
                document.getElementById('editTaskDescription').value = task.description || '';
                
                if (task.dueDate) {
                    const dueDate = new Date(task.dueDate);
                    const formattedDate = dueDate.toISOString().slice(0, 16);
                    document.getElementById('editTaskDueDate').value = formattedDate;
                } else {
                    document.getElementById('editTaskDueDate').value = '';
                }
                
                document.getElementById('editTaskPriority').value = task.priority;
                document.getElementById('editTaskReminder').checked = task.reminder;
                if (task.reminder) {
                    document.getElementById('editReminderTime').value = task.reminderTime;
                    editReminderOptions.classList.remove('hidden');
                } else {
                    editReminderOptions.classList.add('hidden');
                }
                
                editModal.classList.remove('hidden');
            }
        }

        // Close edit modal
        function closeEditModal() {
            editModal.classList.add('hidden');
        }

        // Delete task
        function deleteTask(id) {
            if (confirm('Are you sure you want to delete this task?')) {
                tasks = tasks.filter(task => task.id !== id);
                saveTasks();
                renderTasks();
                showNotification('Task deleted successfully!');
            }
        }

        // Save tasks to localStorage
        function saveTasks() {
            localStorage.setItem('tasks', JSON.stringify(tasks));
        }

        // Update stats
        function updateStats() {
            totalTasksEl.textContent = tasks.length;
            completedTasksEl.textContent = tasks.filter(task => task.completed).length;
            
            const now = new Date();
            overdueTasksEl.textContent = tasks.filter(task => {
                if (task.completed || !task.dueDate) return false;
                return new Date(task.dueDate) < now;
            }).length;
        }

        // Check reminders
        function checkReminders() {
            const now = new Date();
            
            tasks.forEach(task => {
                if (task.reminder && task.reminderTime && !task.completed && task.dueDate) {
                    const dueDate = new Date(task.dueDate);
                    const reminderTime = task.reminderTime * 60000; // Convert minutes to milliseconds
                    const reminderTimeDate = new Date(dueDate.getTime() - reminderTime);
                    
                    // Check if we're within 1 minute of the reminder time
                    if (Math.abs(now - reminderTimeDate) < 60000) {
                        // Check if we've already shown this reminder
                        if (!reminders.includes(task.id)) {
                            showNotification(`Reminder: "${task.title}" is due soon!`);
                            reminders.push(task.id);
                            localStorage.setItem('reminders', JSON.stringify(reminders));
                        }
                    }
                }
            });
        }

        // Show notification
        function showNotification(message) {
            notificationMessage.textContent = message;
            notification.classList.remove('hidden');
            notification.classList.remove('bg-red-500', 'bg-green-500');
            notification.classList.add('bg-green-500');
            
            setTimeout(() => {
                notification.classList.add('hidden');
            }, 3000);
        }
    
        // Event listeners for modal
        closeModal.addEventListener('click', closeEditModal);
        cancelEdit.addEventListener('click', closeEditModal);
        
        // Close modal when clicking outside
        editModal.addEventListener('click', function(e) {
            if (e.target === editModal) {
                closeEditModal();
            }
        });

        // Event listeners for sorting and filtering
        sortBy.addEventListener('change', renderTasks);
        filterBy.addEventListener('change', renderTasks);
    </script>
</body>
</html>